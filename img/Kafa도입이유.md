## 메시지 큐 중에 Kafka를 도입한 이유

적어도 15000대 이상의 차량이 시동 on, 주기정보, off를 요청하고 있다.

1) 카프카의 장점으로는 우선 차량이 개별적으로 시간순으로 적재되어야 하는 부분에서 차량 번호를 키로 사용하여 시동 ON, 주행데이터, 시동 OFF가 순차적으로 각 파티션에 적재될 수 있다.

→ 파티션 별로 병렬 적재가 가능해져 RabbitMQ의 순서 기반 단일 처리 대비 빠른 처리가 가능합니다.

2) 차량이 기하급수적으로 증가하는 상황 (중국 전기차 업체 BYD의 등장과 롯데렌터카 SK렌터카의 홍콩 사모펀드 인수) 등의 시장으로 인프라 확장이 불가피할 때, RabbitMQ의 경우 스케일아웃이 수월하지 않아 도중 중단이 발생할 수 있다.

→ 카프카는 스토리지 크기를 유연하게 증가시킬 수 있는 방식

3) 이전 메시지도 다시 재생할 수 있습니다
사실 차량 데이터 중, 과거 기록중에 이슈가 있다던가 하더라도 메시지의 수신 오류인지 도메인 로직 오류인지 확실하게 인지하지 못할 때가 많다.

차량 데이터가 안정적인 통신 방식으로 수집되지 않을 수 있는 무선 환경이다 보니, 이전 기록을 롤백해서 다시 재처리할 수 있는 방안이 고려될 수 있어야 한다 .

→ ACK 기준을 특정 시점 키로 당겨서 메시지 적재를 재처리할 수도 있어 로직의 이슈인지, 차량 통신 불량인지도 파악이 가능.